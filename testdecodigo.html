<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Movimento com Teclas</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      height: 100vh;
      background-color: #f0f0f0;
    }
    #personagem {
      position: absolute;
      width: 100px;
      height: 100px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.2s ease;
    }
  </style>
</head>
<body>

  <img id="personagem" src="https://guiltygear.wiki.gg/images/thumb/3/32/Gg2_charaart_ky.png/300px-Gg2_charaart_ky.png?2a7b1a" alt="Personagem">

  <script>
    const personagem = document.getElementById("personagem");

    let x = window.innerWidth / 2;
    let y = window.innerHeight / 2;

    let ultimasPosicoes = []; // Guarda o histórico
    let ultimaDirecao = "";

    const direcoes = {
      "ArrowUp": { dx: 0, dy: -20, img: "https://pm1.aminoapps.com/6913/7cbe27afc250fa1d64bc811a6fb2df8496ec9146r1-800-1100v2_uhq.jpg", oposta: "ArrowDown" },
      "ArrowDown": { dx: 0, dy: 20, img: "https://i.pinimg.com/736x/96/1e/e1/961ee1b8e6a07589e6f2f3e321c61475.jpg", oposta: "ArrowUp" },
      "ArrowLeft": { dx: -20, dy: 0, img: "https://i.pinimg.com/736x/68/11/cb/6811cb049e0600897eaeb27f8ed26e86.jpg", oposta: "ArrowRight" },
      "ArrowRight": { dx: 20, dy: 0, img: "https://guiltygear.wiki.gg/images/thumb/e/e9/Ky_Guilty_Gear_Strive.png/1200px-Ky_Guilty_Gear_Strive.png?9c8747", oposta: "ArrowLeft" }
    };

    document.addEventListener("keydown", function(event) {
      const direcao = event.key;
      if (!direcoes[direcao]) return;

      const info = direcoes[direcao];

      // Se apertar direção oposta à anterior, desfaz o último movimento
      if (direcao === direcoes[ultimaDirecao]?.oposta && ultimasPosicoes.length > 0) {
        const anterior = ultimasPosicoes.pop();
        x = anterior.x;
        y = anterior.y;
        personagem.src = anterior.img;
      } else {
        // Salva estado atual antes de mover
        ultimasPosicoes.push({ x, y, img: personagem.src });
        x += info.dx;
        y += info.dy;
        personagem.src = info.img;
        ultimaDirecao = direcao;
      }

      personagem.style.left = x + "px";
      personagem.style.top = y + "px";
    });
  </script>

</body>
</html>
